<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>机器人控制系统监控面板</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Microsoft YaHei', 'SimHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.2;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 25px;
            overflow: hidden;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeaea;
            font-size: 28px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .status-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 5px solid #3498db;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .status-card h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eaeaea;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .param-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px dotted #e0e0e0;
            align-items: center;
        }

        .param-name {
            font-weight: bold;
            color: #555;
            flex: 1;
            word-wrap: break-word;
            white-space: normal;
            max-width: 220px;
        }

        .param-value {
            font-family: 'Courier New', monospace;
            background-color: #f1f1f1;
            padding: 6px 12px;
            border-radius: 4px;
            min-width: 120px;
            /* 加宽适配中文 */
            text-align: center;
            font-weight: bold;
        }

        .string-value {
            min-width: 150px;
            text-align: left;
            font-family: Arial, sans-serif;
        }

        .connection-status {
            position: fixed;
            top: 15px;
            right: 15px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            z-index: 1000;
        }

        .connected {
            background-color: #2ecc71;
            color: white;
        }

        .disconnected {
            background-color: #e74c3c;
            color: white;
        }

        .error {
            border-left-color: #e74c3c;
        }

        .lighter-control {
            border-left-color: #e67e22;
        }

        .local-controller {
            border-left-color: #3498db;
            /* 让本地遥控器模块跨两列 */
            grid-column: span 2;
        }

        .state-display {
            border-left-color: #9b59b6;
        }

        .switch-mode {
            border-left-color: #f39c12;
        }

        .error-monitor {
            border-left-color: #e74c3c;
        }

        .last-update {
            text-align: center;
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 20px;
        }

        .error-code-high {
            color: #e74c3c !important;
            font-weight: bold;
        }

        .error-code-low {
            color: #27ae60 !important;
        }

        /* 子模式样式 */
        .submode-valid {
            color: #27ae60;
        }

        .submode-invalid {
            color: #e74c3c;
        }

        /* 本地控制器Flex布局样式 */
        .controller-card {
            display: flex;
            flex-direction: column;
        }

        .controller-groups {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            flex: 1;
        }

        .controller-group {
            flex: 1;
            min-width: 140px;
            background-color: #fefefe;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #eaeaea;
        }

        .controller-group h4 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid #f0f0f0;
        }

        .controller-group .param-row {
            margin-bottom: 8px;
            padding: 4px 0;
            font-size: 13px;
        }

        .controller-group .param-name {
            min-width: 80px;
            font-size: 12px;
        }

        .controller-group .param-value {
            min-width: 60px;
            font-size: 12px;
            padding: 2px 8px;
        }

        @media (max-width: 768px) {
            .status-grid {
                grid-template-columns: 1fr;
            }

            /* 在移动设备上恢复为单列 */
            .local-controller {
                grid-column: span 1;
            }

            .container {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
            }

            .param-name {
                min-width: 80px;
                font-size: 12px;
            }

            .param-value {
                min-width: 100px;
                /* 移动端适配 */
                font-size: 12px;
            }

            .string-value {
                min-width: 100px;
                font-size: 12px;
            }

            .controller-groups {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
    <script type="text/javascript" src="roslib.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>机器人控制系统监控面板</h1>

        <div id="connectionStatus" class="connection-status disconnected">未连接</div>

        <div class="status-grid">
            <!-- 灯光和显示屏控制 -->
            <div class="status-card lighter-card">
                <h3>灯组、数显控制指令</h3>
                <div class="param-row">
                    <span class="param-name">red_light_cmd <br>红灯控制指令:</span>
                    <span id="red_light_cmd" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">green_light_cmd <br>绿灯控制指令:</span>
                    <span id="green_light_cmd" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">yellow_light_cmd <br>黄灯控制指令:</span>
                    <span id="yellow_light_cmd" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">displayer_cmd <br>数显控制指令:</span>
                    <span id="displayer_cmd" class="param-value string-value">--</span>
                </div>
            </div>

            <!-- 状态显示 -->
            <div class="status-card state-display">
                <h3>整车状态展示模块</h3>
                <!-- <div class="param-row">
                    <span class="param-name">m_system_mode <br>小车主模式指令:</span>
                    <span id="m_system_mode" class="param-value">0（车辆运动控制）</span>
                </div>
                <div class="param-row">
                    <span class="param-name">s_system_mode <br>小车子模式指令:</span>
                    <span id="s_system_mode" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">battery_level <br>小车电池电量指令:</span>
                    <span id="battery_level" class="param-value string-value">--</span>
                </div> -->
                <div class="param-row">
                    <span class="param-name">display_mode <br>灯组、数显显示模式指令:</span>
                    <span id="display_mode" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">agv_battery_level <br>电池电量:</span>
                    <span id="agv_battery_level" class="param-value string-value"></span>
                </div>
            </div>

            <!-- 模式切换 -->
            <div class="status-card switch-card switch-mode">
                <h3>整车模式切换模块</h3>
                <div class="param-row">
                    <span class="param-name">auto_mode <br>小车自动模式指令:</span>
                    <span id="auto_mode" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">tele_op_mode <br>小车远控模式指令:</span>
                    <span id="tele_op_mode" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">switch_m_mode <br>小车主模式指令:</span>
                    <span id="switch_m_mode" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">switch_s_mode <br>小车子模式指令:</span>
                    <span id="switch_s_mode" class="param-value">0</span>
                </div>
            </div>

            <!-- 错误监控 -->
            <div class="status-card error-monitor">
                <h3>节点运行监测</h3>
                <div class="param-row">
                    <span class="param-name">robot_error_code <br>整车及各机构故障代码:</span>
                    <span id="robot_error_code" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">local_controller_error <br>本地控制器节点状态:</span>
                    <span id="local_controller_error" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">state_display_error <br>整车状态展示节点状态:</span>
                    <span id="state_display_error" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">switch_mode_error <br>整车模式切换节点状态:</span>
                    <span id="switch_mode_error" class="param-value">0</span>
                </div>
                <div class="param-row">
                    <span class="param-name">control_error <br>整车控制节点状态:</span>
                    <span id="control_error" class="param-value">0</span>
                </div>
            </div>

            <div class="status-card controller-card local-controller">
                <h3>本地遥控器接收指令模块</h3>
                <div class="controller-groups">
                    <!-- 方向键组 -->
                    <div class="controller-group">
                        <div class="param-row">
                            <span class="param-name">left_cmd <br>本地遥控器左键指令:</span>
                            <span id="left_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">right_cmd <br>本地遥控器右键指令:</span>
                            <span id="right_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">up_cmd <br>本地遥控器上键指令:</span>
                            <span id="up_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">down_cmd <br>本地遥控器下键指令:</span>
                            <span id="down_cmd" class="param-value">0</span>
                        </div>
                    </div>

                    <!-- 字母键组 -->
                    <div class="controller-group">
                        <div class="param-row">
                            <span class="param-name">x_cmd <br>本地遥控器x键指令:</span>
                            <span id="x_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">b_cmd <br>本地遥控器b键指令:</span>
                            <span id="b_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">y_cmd <br>本地遥控器y键指令:</span>
                            <span id="y_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">a_cmd <br>本地遥控器a键指令:</span>
                            <span id="a_cmd" class="param-value">0</span>
                        </div>
                    </div>

                    <!-- 摇杆组 -->
                    <div class="controller-group">
                        <div class="param-row">
                            <span class="param-name">left_rocker_x <br>本地遥控器左侧x向摇杆指令:</span>
                            <span id="left_rocker_x" class="param-value">0.00</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">left_rocker_y <br>本地遥控器左侧y向摇杆指令:</span>
                            <span id="left_rocker_y" class="param-value">0.00</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">right_rocker_x <br>本地遥控器右侧x向摇杆指令:</span>
                            <span id="right_rocker_x" class="param-value">0.00</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">right_rocker_y <br>本地遥控器右侧y向摇杆指令:</span>
                            <span id="right_rocker_y" class="param-value">0.00</span>
                        </div>
                    </div>

                    <!-- 肩键组 -->
                    <div class="controller-group">
                        <div class="param-row">
                            <span class="param-name">r1_cmd <br>本地遥控器右前侧第一键指令:</span>
                            <span id="r1_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">r2_cmd <br>本地遥控器右前侧第二键指令:</span>
                            <span id="r2_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">l1_cmd <br>本地遥控器左前侧第一键指令:</span>
                            <span id="l1_cmd" class="param-value">0</span>
                        </div>
                        <div class="param-row">
                            <span class="param-name">l2_cmd <br>本地遥控器左前侧第二键指令:</span>
                            <span id="l2_cmd" class="param-value">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="last-update">
            最后更新: <span id="lastUpdateTime">--</span>
        </div>
    </div>

    <script type="text/javascript">
        // 创建ROS连接
        var ros = new ROSLIB.Ros({
            url: 'ws://192.168.1.12:9090'
        });

        // 连接状态处理
        ros.on('connection', function () {
            console.log('已连接到ROS WebSocket服务器');
            document.getElementById('connectionStatus').textContent = '已连接';
            document.getElementById('connectionStatus').className = 'connection-status connected';
        });

        ros.on('error', function (error) {
            console.log('连接ROS WebSocket服务器时出错: ', error);
            document.getElementById('connectionStatus').textContent = '连接错误';
            document.getElementById('connectionStatus').className = 'connection-status disconnected';
        });

        ros.on('close', function () {
            console.log('与ROS WebSocket服务器的连接已关闭');
            document.getElementById('connectionStatus').textContent = '未连接';
            document.getElementById('connectionStatus').className = 'connection-status disconnected';
        });

        // 更新最后更新时间
        function updateLastUpdateTime() {
            var now = new Date();
            var timeString = now.toLocaleTimeString();
            document.getElementById('lastUpdateTime').textContent = timeString;
        }

        // 主模式数值转中文含义
        function getMainModeText(modeNum) {
            const num = Number(modeNum);
            switch (num) {
                case 0:
                    return '0（车辆运动控制）';
                case 1:
                    return '1（伸缩杆运动控制）';
                case 2:
                    return '2（六自由度平台控制）';
                default:
                    return '0（车辆运动控制）'; // 无效值默认0
            }
        }

        // 子模式数值转中文含义（仅主模式2时生效）
        function getSubModeText(modeNum, mainMode) {
            const mainNum = Number(mainMode);
            const subNum = Number(modeNum);
            if (mainNum !== 2) {
                return '0'; // 主模式非2时子模式仅显示0
            }
            switch (subNum) {
                case 0:
                    return '0（平移）';
                case 1:
                    return '1（旋转）';
                default:
                    return '0（平移）'; // 无效值默认0
            }
        }

        // 订阅灯光和显示屏控制话题
        var lighterDisplayerListener = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_robotgo1_lighter_displayer_msg',
            messageType: 'std_msgs/UInt16'
        });

        // 订阅本地控制器话题
        var localControllerListener = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_robotgo1_local_controller_msg',
            messageType: 'xian_dj_robotgo1_control_pkg/xian_dj_robotgo1_local_controller'
        });
        var agvBatteryTopic = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_utils_agv_battery_level_msg',
            messageType: 'std_msgs/String'
        });
        // 订阅状态显示话题
        var stateDisplayListener = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_robotgo1_state_display_msg',
            messageType: 'xian_dj_robotgo1_control_pkg/xian_dj_robotgo1_state_display'
        });

        // 订阅模式切换话题
        var switchModeListener = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_robotgo1_switch_mode_msg',
            messageType: 'xian_dj_robotgo1_control_pkg/xian_dj_robotgo1_switch_mode'
        });

        // 订阅错误监控话题
        var errorMonitorListener = new ROSLIB.Topic({
            ros: ros,
            name: '/xian_dj_tele_op_error_monitor_msg',
            messageType: 'std_msgs/String'
        });

        // 处理接收到的灯光和显示屏控制消息
        lighterDisplayerListener.subscribe(function (message) {
            console.log('收到灯光和显示屏控制消息:', message);
            updateLastUpdateTime();

            if (message.data !== undefined) {
                console.log('收到UInt16数据:', message.data);
            }
        });

        // 处理接收到的本地控制器消息
        localControllerListener.subscribe(function (message) {
            console.log('收到本地控制器消息:', message);
            updateLastUpdateTime();

            if (message.xian_dj_local_controller_left_cmd !== undefined) {
                document.getElementById('left_cmd').textContent = message.xian_dj_local_controller_left_cmd;
            }
            if (message.xian_dj_local_controller_right_cmd !== undefined) {
                document.getElementById('right_cmd').textContent = message.xian_dj_local_controller_right_cmd;
            }
            if (message.xian_dj_local_controller_up_cmd !== undefined) {
                document.getElementById('up_cmd').textContent = message.xian_dj_local_controller_up_cmd;
            }
            if (message.xian_dj_local_controller_down_cmd !== undefined) {
                document.getElementById('down_cmd').textContent = message.xian_dj_local_controller_down_cmd;
            }
            if (message.xian_dj_local_controller_x_cmd !== undefined) {
                document.getElementById('x_cmd').textContent = message.xian_dj_local_controller_x_cmd;
            }
            if (message.xian_dj_local_controller_y_cmd !== undefined) {
                document.getElementById('y_cmd').textContent = message.xian_dj_local_controller_y_cmd;
            }
            if (message.xian_dj_local_controller_a_cmd !== undefined) {
                document.getElementById('a_cmd').textContent = message.xian_dj_local_controller_a_cmd;
            }
            if (message.xian_dj_local_controller_b_cmd !== undefined) {
                document.getElementById('b_cmd').textContent = message.xian_dj_local_controller_b_cmd;
            }
            if (message.xian_dj_local_controller_left_rocker_x_cmd !== undefined) {
                document.getElementById('left_rocker_x').textContent = message.xian_dj_local_controller_left_rocker_x_cmd.toFixed(3);
            }
            if (message.xian_dj_local_controller_left_rocker_y_cmd !== undefined) {
                document.getElementById('left_rocker_y').textContent = message.xian_dj_local_controller_left_rocker_y_cmd.toFixed(3);
            }
            if (message.xian_dj_local_controller_right_rocker_x_cmd !== undefined) {
                document.getElementById('right_rocker_x').textContent = message.xian_dj_local_controller_right_rocker_x_cmd.toFixed(3);
            }
            if (message.xian_dj_local_controller_right_rocker_y_cmd !== undefined) {
                document.getElementById('right_rocker_y').textContent = message.xian_dj_local_controller_right_rocker_y_cmd.toFixed(3);
            }
            if (message.xian_dj_local_controller_r1_cmd !== undefined) {
                document.getElementById('r1_cmd').textContent = message.xian_dj_local_controller_r1_cmd;
            }
            if (message.xian_dj_local_controller_r2_cmd !== undefined) {
                document.getElementById('r2_cmd').textContent = message.xian_dj_local_controller_r2_cmd;
            }
            if (message.xian_dj_local_controller_l1_cmd !== undefined) {
                document.getElementById('l1_cmd').textContent = message.xian_dj_local_controller_l1_cmd;
            }
            if (message.xian_dj_local_controller_l2_cmd !== undefined) {
                document.getElementById('l2_cmd').textContent = message.xian_dj_local_controller_l2_cmd;
            }
        });

        // 处理接收到的状态显示消息
        stateDisplayListener.subscribe(function (message) {
            console.log('收到状态显示消息:', message);
            updateLastUpdateTime();

            // 处理状态显示模块的主模式（数值+中文）
            if (message.xian_dj_robotgo1_m_system_mode !== undefined) {
                const mMode = Number(message.xian_dj_robotgo1_m_system_mode);
                const validMMode = [0, 1, 2].includes(mMode) ? mMode : 0;
                document.getElementById('m_system_mode').textContent = getMainModeText(validMMode);
            }

            // 处理状态显示模块的子模式
            if (message.xian_dj_robotgo1_s_system_mode !== undefined) {
                const sMode = Number(message.xian_dj_robotgo1_s_system_mode);
                const currentMModeText = document.getElementById('m_system_mode').textContent;
                // 从主模式文本中提取数值（如"2（六自由度平台控制）" → 2）
                const currentMMode = Number(currentMModeText.charAt(0));
                const validSMode = currentMMode === 2 ? ([0, 1].includes(sMode) ? sMode : 0) : 0;
                document.getElementById('s_system_mode').textContent = getSubModeText(validSMode, currentMMode);
            }

            if (message.xian_dj_robotgo1_battery_level !== undefined) {
                document.getElementById('battery_level').textContent = message.xian_dj_robotgo1_battery_level;
            }
            if (message.xian_dj_robotgo1_display_mode !== undefined) {
                document.getElementById('display_mode').textContent = message.xian_dj_robotgo1_display_mode;
            }
        });

        // 处理接收到的模式切换消息
        switchModeListener.subscribe(function (message) {
            console.log('收到模式切换消息:', message);
            updateLastUpdateTime();

            if (message.xian_dj_robotgo1_auto_mode !== undefined) {
                document.getElementById('auto_mode').textContent = message.xian_dj_robotgo1_auto_mode;
            }
            if (message.xian_dj_robotgo1_tele_op_mode !== undefined) {
                document.getElementById('tele_op_mode').textContent = message.xian_dj_robotgo1_tele_op_mode;
            }

            // 处理模式切换模块的主模式（数值+中文，限制0/1/2）
            if (message.xian_dj_robotgo1_m_system_mode !== undefined) {
                const mMode = Number(message.xian_dj_robotgo1_m_system_mode);
                const validMMode = [0, 1, 2].includes(mMode) ? mMode : 0;
                document.getElementById('switch_m_mode').textContent = getMainModeText(validMMode);

                // 主模式变化后，同步更新子模式
                checkAndUpdateSubMode();
            }

            // 处理模式切换模块的子模式
            if (message.xian_dj_robotgo1_s_system_mode !== undefined) {
                const sMode = Number(message.xian_dj_robotgo1_s_system_mode);
                const currentMModeText = document.getElementById('switch_m_mode').textContent;
                const currentMMode = Number(currentMModeText.charAt(0));
                const validSMode = currentMMode === 2 ? ([0, 1].includes(sMode) ? sMode : 0) : 0;

                const sModeElement = document.getElementById('switch_s_mode');
                sModeElement.textContent = getSubModeText(validSMode, currentMMode);

                // 子模式样式标记
                sModeElement.className = 'param-value';
                if (currentMMode === 2) {
                    sModeElement.classList.add([0, 1].includes(validSMode) ? 'submode-valid' : 'submode-invalid');
                }
            }
        });

        // 校验并更新子模式的辅助函数
        function checkAndUpdateSubMode() {
            const currentMModeText = document.getElementById('switch_m_mode').textContent;
            const currentMMode = Number(currentMModeText.charAt(0));
            const currentSModeText = document.getElementById('switch_s_mode').textContent;
            // 从子模式文本中提取数值（如"1（旋转）" → 1）
            const currentSMode = Number(currentSModeText.charAt(0));

            const validSMode = currentMMode === 2 ? ([0, 1].includes(currentSMode) ? currentSMode : 0) : 0;

            const sModeElement = document.getElementById('switch_s_mode');
            sModeElement.textContent = getSubModeText(validSMode, currentMMode);
            sModeElement.className = 'param-value';

            // 仅主模式2时添加样式
            if (currentMMode === 2) {
                sModeElement.classList.add([0, 1].includes(validSMode) ? 'submode-valid' : 'submode-invalid');
            }
        }
        function handleAgvBatteryMsg(message) {
            console.log('收到AGV电池电量消息:', message);
            updateLastUpdateTime();
            // std_msgs/String的核心数据在data字段
            const batteryData = message.data || '--';
            // 格式化显示（如果是数字则补充%）
            let batteryDisplay = batteryData;
            if (!isNaN(Number(batteryData))) {
                batteryDisplay = `${Number(batteryData)}%`;
            }
            document.getElementById('agv_battery_level').textContent = batteryDisplay;
        }
        // 首次订阅AGV电池话题
        agvBatteryTopic.subscribe(handleAgvBatteryMsg);

        // 处理接收到的错误监控消息
        errorMonitorListener.subscribe(function (message) {
            console.log('收到错误监控消息:', message);
            updateLastUpdateTime();

            if (message.data !== undefined) {
                var errorParts = message.data.split('   ');
                if (errorParts.length >= 6) {
                    if (errorParts[0] !== undefined) {
                        document.getElementById('robot_error_code').textContent = errorParts[0];
                    }
                    if (errorParts[1] !== undefined) {
                        document.getElementById('local_controller_error').textContent = errorParts[1] === '0' ? "正常" : "故障";
                    }
                    if (errorParts[2] !== undefined) {
                        document.getElementById('state_display_error').textContent = errorParts[2] === '0' ? "正常" : "故障";
                    }
                    if (errorParts[3] !== undefined) {
                        document.getElementById('switch_mode_error').textContent = errorParts[3] === '0' ? "正常" : "故障";
                    }
                    if (errorParts[4] !== undefined) {
                        document.getElementById('control_error').textContent = errorParts[4] === '0' ? "正常" : "故障";
                    }
                }
            }
        });
    </script>
</body>

</html>